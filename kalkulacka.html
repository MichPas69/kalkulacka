<!DOCTYPE html>
<html lang="sk">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Spektra â€“ Plyn vs. TepelnÃ© Äerpadlo (roÄnÃ© nÃ¡klady)</title>
<style>
  :root{ --brand:#D60000; --dark:#1F1F1F; --bg:#F6F7F9; }
  html,body{margin:0;padding:0;font-family:Inter,Segoe UI,Roboto,Arial,sans-serif;background:#fff;color:#111}
  .wrap{max-width:1100px;margin:28px auto;padding:0 16px}
  h1{font-size:clamp(22px,4vw,34px);margin:.2em 0 .5em;color:var(--dark)}
  .grid{display:grid;grid-template-columns:1fr;gap:16px}
  @media(min-width:980px){ .grid{grid-template-columns:1fr 1fr} }
  .card{background:#fff;border:1px solid #eee;border-radius:14px;padding:16px}
  h2{font-size:18px;margin:.2em 0 .6em}
  label{display:block;font-weight:700;margin-top:10px}
  input[type="number"], select{width:100%;padding:10px;border:1px solid #ddd;border-radius:10px;font-size:15px;margin-top:4px}
  .muted{color:#666;font-size:13px}
  .note{background:#fff3f3;border:1px solid #ffd6d6;color:#7a1414;padding:10px 12px;border-radius:10px;margin:10px 0}
  table{width:100%;border-collapse:collapse}
  th,td{padding:10px;border-bottom:1px solid #eee;text-align:left}
  tfoot td{font-weight:800}
  .right{text-align:right}
  .total{font-size:20px}
  .kpi{display:grid;grid-template-columns:repeat(3,1fr);gap:10px;margin-top:12px}
  .kpi .box{background:var(--bg);border:1px solid #e8e8e8;border-radius:12px;padding:12px}
  .kpi .box b{display:block;font-size:12px;color:#555}
  .kpi .box span{font-size:20px;font-weight:800}
  .cta{margin-top:12px;display:flex;gap:10px;flex-wrap:wrap}
  .btn{background:var(--brand);border:none;color:#fff;padding:10px 14px;border-radius:10px;font-weight:800;text-transform:uppercase;cursor:pointer}
  .btn.secondary{background:#444}
</style>
</head>
<body>
<div class="wrap">
  <h1>ğŸ§® RoÄnÃ© nÃ¡klady: plyn vs. tepelnÃ© Äerpadlo</h1>
  <div class="note">Zadajte roÄnÃº spotrebu plynu a ceny. KalkulaÄka prerÃ¡ta plyn na kWh, vypoÄÃ­ta nÃ¡klady a porovnÃ¡ ich s nÃ¡kladmi na tepelnÃ© Äerpadlo (SCOP). VÃ½sledok je orientaÄnÃ½.</div>

  <div class="grid">
    <div class="card">
      <h2>1) Plyn â€“ vstupy</h2>
      <label>RoÄnÃ¡ spotreba plynu (mÂ³)</label>
      <input id="gas_m3" type="number" min="0" step="1" value="1500">
      <div class="muted">BeÅ¾nÃ½ rodinnÃ½ dom: ~1200â€“2000 mÂ³/rok</div>

      <label>SpodnÃ¡ vÃ½hrevnosÅ¥ (kWh/mÂ³)</label>
      <input id="calorific" type="number" min="8" max="12" step="0.1" value="10.5">
      <div class="muted">Typicky 10.2â€“10.8 kWh/mÂ³</div>

      <label>ÃšÄinnosÅ¥ kotla (%)</label>
      <input id="boiler_eff" type="number" min="50" max="105" step="1" value="90">
      <div class="muted">KondenzaÄnÃ½ kotol 88â€“98 %</div>

      <label>Cena plynu (â‚¬/mÂ³)</label>
      <input id="gas_price" type="number" min="0" step="0.01" value="0.75">

      <label>FixnÃ½ mesaÄnÃ½ poplatok plynu (â‚¬/mes.)</label>
      <input id="gas_fixed" type="number" min="0" step="0.01" value="5">
    </div>

    <div class="card">
      <h2>2) TepelnÃ© Äerpadlo â€“ vstupy</h2>
      <label>SCOP/COP</label>
      <select id="scop">
        <option value="2.8">2.8</option>
        <option value="3.2" selected>3.2</option>
        <option value="3.6">3.6</option>
        <option value="4.0">4.0</option>
      </select>

      <label>Cena elektriny (â‚¬/kWh)</label>
      <input id="elec_price" type="number" min="0" step="0.001" value="0.18">

      <label>Pokrytie FVE pre TÄŒ (%)</label>
      <input id="pv" type="number" min="0" max="100" step="5" value="20">
      <div class="muted">Percento elektriny pre TÄŒ pokrytÃ© fotovoltikou</div>

      <label>InvestÃ­cia do TÄŒ (voliteÄ¾nÃ©, â‚¬)</label>
      <input id="hp_invest" type="number" min="0" step="100" value="0">
      <div class="muted">Ak vyplnÃ­te, zobrazÃ­ sa orientaÄnÃ¡ nÃ¡vratnosÅ¥</div>
    </div>

    <div class="card" style="grid-column:1/-1">
      <h2>VÃ½sledok</h2>
      <div class="kpi">
        <div class="box"><b>Plyn â€“ energia</b><span id="gas_kwh">0 kWh</span></div>
        <div class="box"><b>UÅ¾itoÄnÃ© teplo</b><span id="heat_kwh">0 kWh</span></div>
        <div class="box"><b>TÄŒ â€“ el. spotreba</b><span id="hp_kwh">0 kWh</span></div>
      </div>

      <table style="margin-top:12px">
        <tbody id="rows"></tbody>
        <tfoot>
          <tr><td><b>RoÄnÃ© nÃ¡klady plynu (spolu)</b></td><td class="right" id="gas_total">0 â‚¬</td></tr>
          <tr><td><b>RoÄnÃ© nÃ¡klady TÄŒ (spolu)</b></td><td class="right" id="hp_total">0 â‚¬</td></tr>
          <tr><td class="total">RoÄnÃ¡ Ãºspora s TÄŒ</td><td class="right total" id="savings">0 â‚¬</td></tr>
        </tfoot>
      </table>

      <div class="kpi" id="payback_wrap" style="display:none">
        <div class="box" style="grid-column:1/-1">
          <b>Odhad nÃ¡vratnosti investÃ­cie</b>
          <span id="payback">â€“ rokov</span>
        </div>
      </div>

      <div class="cta">
        <button class="btn" id="copyBtn">KopÃ­rovaÅ¥ vÃ½sledok</button>
        <button class="btn secondary" id="resetBtn">Reset</button>
      </div>
    </div>
  </div>
</div>

<script>
(function(){
  function eur(n){ return n.toLocaleString('sk-SK',{style:'currency',currency:'EUR'}); }
  function kwh(x){ return Math.round(x).toLocaleString('sk-SK') + ' kWh'; }
  function el(id){ return document.getElementById(id); }

  function calc(){
    var gas_m3   = +el('gas_m3').value||0;
    var H        = +el('calorific').value||10.5;           // kWh/m3
    var eff      = (+el('boiler_eff').value||90)/100;      // ÃºÄinnosÅ¥ (0-1)
    var gas_p    = +el('gas_price').value||0;              // â‚¬/m3
    var gas_fix  = +el('gas_fixed').value||0;              // â‚¬/mes
    var SCOP     = +el('scop').value||3.2;
    var el_p     = +el('elec_price').value||0.18;          // â‚¬/kWh
    var pv       = Math.min(100,Math.max(0,+el('pv').value||0))/100; // 0-1
    var invest   = +el('hp_invest').value||0;

    // Plyn -> kWh
    var gas_energy_kWh = gas_m3 * H;               // energia v plyne (kWh)
    var useful_heat    = gas_energy_kWh * eff;     // uÅ¾itoÄnÃ© teplo do domu (kWh)

    // NÃ¡klady plynu
    var gas_energy_cost = gas_m3 * gas_p;          // variabilnÃ¡ zloÅ¾ka
    var gas_fix_year    = gas_fix * 12;            // fix
    var gas_total       = gas_energy_cost + gas_fix_year;

    // TÄŒ
    var hp_kwh = (SCOP>0) ? (useful_heat / SCOP) : 0; // elektrina v kWh
    var hp_paid_kwh = hp_kwh * (1 - pv);               // ÄasÅ¥ nepokrytÃ¡ FVE
    var hp_total = hp_paid_kwh * el_p;                 // nÃ¡klady (iba platenÃ¡ elektrina)
    var savings = Math.max(0, gas_total - hp_total);

    // Render KPIs
    el('gas_kwh').textContent  = kwh(gas_energy_kWh);
    el('heat_kwh').textContent = kwh(useful_heat);
    el('hp_kwh').textContent   = kwh(hp_kwh);

    // Breakdown table
    var rows = [
      ['Plyn: spotreba', gas_m3.toLocaleString('sk-SK') + ' mÂ³'],
      ['Plyn: energia', kwh(gas_energy_kWh)],
      ['Kotol: ÃºÄinnosÅ¥', Math.round(eff*100) + ' %'],
      ['UÅ¾itoÄnÃ© teplo', kwh(useful_heat)],
      ['Plyn: cena za mÂ³', eur(gas_p) + ' / mÂ³'],
      ['Plyn: variabilnÃ¡ zloÅ¾ka', eur(gas_energy_cost)],
      ['Plyn: fixnÃ¡ zloÅ¾ka (12Ã—)', eur(gas_fix_year)],
      ['TÄŒ: SCOP', SCOP.toFixed(1)],
      ['TÄŒ: el. spotreba', kwh(hp_kwh)],
      ['FVE pokrytie', Math.round(pv*100) + ' %'],
      ['Elektrina: cena', eur(el_p) + ' / kWh']
    ];
    el('rows').innerHTML = rows.map(function(r){
      return '<tr><td>'+r[0]+'</td><td class="right">'+r[1]+'</td></tr>';
    }).join('');

    el('gas_total').textContent = eur(gas_total);
    el('hp_total').textContent  = eur(hp_total);
    el('savings').textContent   = eur(savings);

    // Payback
    if(invest>0 && savings>0){
      var years = invest / savings;
      el('payback').textContent = years.toFixed(1).replace('.', ',') + ' roka/rokov';
      el('payback_wrap').style.display = 'grid';
    } else {
      el('payback_wrap').style.display = 'none';
    }
  }

  ['gas_m3','calorific','boiler_eff','gas_price','gas_fixed','scop','elec_price','pv','hp_invest'].forEach(function(id){
    var x = document.getElementById(id);
    x.addEventListener('input', calc);
    x.addEventListener('change', calc);
  });
  document.getElementById('copyBtn').addEventListener('click', function(){
    var lines = [].slice.call(document.querySelectorAll('#rows tr')).map(function(tr){
      var t=tr.querySelectorAll('td'); return '- ' + t[0].textContent + ': ' + t[1].textContent;
    });
    lines.push('RoÄnÃ© nÃ¡klady plynu: ' + document.getElementById('gas_total').textContent);
    lines.push('RoÄnÃ© nÃ¡klady TÄŒ: ' + document.getElementById('hp_total').textContent);
    lines.push('RoÄnÃ¡ Ãºspora: ' + document.getElementById('savings').textContent);
    var pb = document.getElementById('payback_wrap').style.display!=='none' ? document.getElementById('payback').textContent : '';
    if(pb) lines.push('Odhad nÃ¡vratnosti: ' + pb);
    navigator.clipboard.writeText(lines.join('\n')).then(function(){ alert('VÃ½sledok skopÃ­rovanÃ½.'); });
  });
  document.getElementById('resetBtn').addEventListener('click', function(){
    var def = {gas_m3:1500, calorific:10.5, boiler_eff:90, gas_price:0.75, gas_fixed:5, scop:3.2, elec_price:0.18, pv:20, hp_invest:0};
    Object.keys(def).forEach(function(k){
      var e = document.getElementById(k); e.value = def[k];
    });
    calc();
  });

  calc();
})();
</script>
</body>
</html>
